プロジェクトロードマップ：Cat-box 【完全版】

プロジェクトビジョン: プログラミングの経験値を問わず、誰もが自作のソフトウェアを気軽に公開し、その創作活動から正当なリターン（評価と収益）を得られる、クリエイター中心のアプリケーションプラットフォーム。

リスク管理方針: 管理者による事前レビューは行わない。代わりに、①強力な自動アップロードフィルタリングと、②ユーザーからの通報に基づく迅速な事後対応を2本柱とし、プラットフォームの健全性を維持する。

【フェーズ1】 コア・エンジンの構築 (MVP)

目的: ユーザーがWebサイトでアプリを発見し、専用ランチャー経由で安全にダウンロード・実行できる、というプロジェクトの根幹をなす技術的フローを確立する。

ステップ1: サーバーサイドAPIの基盤構築

1-1. プロジェクトセットアップ: FastAPI, uvicorn

1-2. データモデル定義 (Pydantic): Appモデル

1-3. ダミーAPI実装: ハードコードされたアプリ情報リストを返す

1-4. CORS設定

1-5. PaaSへのデプロイ (Render.comなど)

ステップ2: プラットフォーム・ランチャーの骨格開発

2-1. プロジェクトセットアップ: PySide6, requests

2-2. APIクライアント実装

2-3. メインウィンドウUI設計: ライブラリ一覧、ログ表示

2-4. 非同期API通信 (QThread)

2-5. 基本的なプロセス起動機能 (subprocess.Popen)

ステップ3: セキュアなアプリ配布システムの確立

3-1. クラウドストレージ準備 (Amazon S3など)

3-2. アプリパッケージ準備: サンプルアプリをzip化 (requirements.txt同梱ルール)

3-3. APIの更新: S3への正しいダウンロードURLを返すように修正

3-4. ランチャーへのダウンロード機能実装 (進捗表示付き)

3-5. アプリ環境の分離と実行ロジック: venvによる仮想環境の自動構築と、requirements.txtに基づくライブラリインストール、仮想環境内での実行

ステップ4: 【最重要】アップロード自動検証パイプライン

4-1. アップロードエンドポイント実装: zipファイルを受け取るFastAPIエンドポイントを作成。

4-2. 厳格なファイル制限:

ファイルサイズ上限を厳しく設定 (例: 50MB)。これを超えるリクエストは即座に拒否。

zip内のファイル数上限を設定 (例: 100ファイル)。

4-3. アーカイブ内部の自動走査:

許可する拡張子をホワイトリスト形式で定義 (.py, .ui, .png, .txt等)。リスト外のファイルが含まれていればアップロードを拒否。

.exe, .dll, .bat, .cmdなどの直接実行可能なバイナリが含まれている場合は即時拒否。

4-4. ウイルススキャン: サーバー上のClamAV等と連携し、アップロードされたzipファイルを自動でスキャン。脅威が検出されれば即時拒否・削除。

4-5. ハッシュ値DBによる既知ファイル検知: ファイルのハッシュ値を計算し、既知の著作権侵害物やマルウェアのハッシュDBと照合する。

【フェーズ2】 プラットフォームの社会実装とコミュニティ基盤

目的: ユーザーが実際に参加できる「場」を作る。法務基盤を固め、アカウント機能とWeb上でのアプリ投稿フローを完成させ、コミュニティによる自浄作用の仕組みを導入する。

ステップ5: 法務・制度的基盤の整備

5-1. 専門家への相談: ITに詳しい弁護士にプラットフォーム構想を説明し、法的リスクを洗い出す。

5-2. 利用規約の作成: 禁止事項（著作権侵害、マルウェア等）を明確化し、違反時のアカウント停止・削除措置、ユーザー通報制度について明記する。

5-3. プライバシーポリシーの作成

5-4. 著作権侵害対応プロセスの確立 (DMCAテイクダウンノーティス)

ステップ6: ユーザー認証とデータベース導入

6-1. DBセットアップ (PostgreSQL)

6-2. ORM導入 (SQLAlchemy, Alembic): User, Appモデルを定義。

6-3. 認証ロジック実装: ローカル登録、SNS/Googleログイン (OAuth2)

6-4. ランチャーへの認証機能実装

ステップ7: Webフロントエンドと開発者機能

7-1. Webサイト構築: メルカリ風のアプリ一覧・詳細ページを作成 (Jinja2)。

7-2. 開発者向けWeb UI: マイページ、アプリ登録/編集フォーム、zipアップロード機能。

7-3. アップロード処理の統合: Web UIからのアップロードが、ステップ4の自動検証パイプラインを通過し、問題がなければ即時公開されるフローを構築する。Appモデルにステータス（公開中, 非公開, 通報により停止中など）を持たせる。

ステップ8: 【重要】コミュニティによる自浄作用の仕組み

8-1. 通報機能の実装:

Webサイトの各アプリページに「問題を報告する」ボタンを設置。

報告種別（著作権侵害、不適切なコンテンツ、バグ/動作不良など）を選択できるようにする。

8-2. 管理者向け通報管理ダッシュボード:

通報があったアプリを一覧で確認できる管理ページを作成。

ボタン一つで該当アプリを「一時公開停止」にできる機能を実装。

一定数の通報が短期間に集まったアプリを自動で「一時公開停止」にするロジックを導入。

【フェーズ3】 UX向上とコミュニティの活性化

目的: プラットフォームを「使っていて楽しい場所」にする。Webとランチャーをシームレスに連携させ、ユーザー間の交流や発見の喜びを創出する。

ステップ9: シームレスなWeb-ランチャー連携

9-1. カスタムURLスキーム登録 (catbox://)

9-2. ランチャーの引数処理 (catbox://launch?app\_id=...)

9-3. Webサイトへの「ランチャーで起動/入手」ボタン設置

ステップ10: エンゲージメント機能の実装

10-1. 統計・ランキング機能: アプリの利用回数を記録・集計し、Webサイトにランキングや新着セクションを表示。

10-2. 評価・コメント機能: ユーザーがアプリに評価やコメントを投稿できるようにする。

【フェーズ4】 収益化エコシステムの構築

目的: 構想の中核である収益化モデルを実装し、クリエイターへの還元サイクルを回し始める。

ステップ11: 収益分配システムの基盤構築 (ポイント制度)

11-1. ポイントDB設計と履歴管理

11-2. ポイント交換連携 (デジコ等)

11-3. ポイント管理UI (残高確認、交換申請)

ステップ12: プレミアムプランの導入

12-1. 決済システム導入 (Stripe等)

12-2. ユーザーとアプリの階層化 (Basic/Premium, 基本アプリ/Pアプリ)

12-3. アクセス制御: Pアプリはプレミアムユーザーのみ起動可能に。

ステップ13: 広告システムの導入

13-1. 広告プロバイダー選定 (Google AdSense等)

13-2. Webサイトへの広告実装

ステップ14: 収益分配バッチ処理の実装

14-1. 定期実行バッチを作成。

14-2. 広告収益とプレミアム収益を、それぞれのロジック（アプリ利用回数等）に基づいて集計し、クリエイターにポイントを分配する。

14-3. 開発者マイページでの収益明細表示。

【フェーズ5】 将来構想とスケーラビリティ

目的: プラットフォームの持続的な成長と技術的優位性を確保する。

ステップ15: 高度なスケーラビリティ対策

15-1. CDNの導入 (Amazon CloudFrontなど)

15-2. 【将来構想】P2Pファイル配布システムの検討: 転送コストが事業上の課題となった段階で、導入を調査・研究する。

ステップ16: AIによる高度なコンテンツ分析

16-1. 【将来構想】 Pythonコードの静的解析ツールを検証パイプラインに導入し、悪意のある可能性のあるコード（無限ループ、大量のファイル書き込み等）を検知・警告する。

16-2. 【将来構想】 アプリのスクリーンショットや説明文をAIで画像・自然言語解析し、不適切なコンテンツを自動で検知する。

